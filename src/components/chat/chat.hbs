<section class="chat">
    {{{ 
        DialogFindUsers 
            onClose=onClose 
            addUserToChat=addUserToChat 
            ref="dialogFindUsers" 
            onInput=findUsers 
    }}}

    <header class="chat-header">
        {{#if isOpenDialogChatOptions}}
            {{{ ChatOptions handleAddMember=handleAddMember handleDeleteMember=handleDeleteMember }}}
        {{/if}}

        {{#if companion}}
            <div class="chat-header__details">
                <div class="chat-header__avatar">
                    <img 
                        src={{ companion.avatar }}
                        alt="User Avatar"
                        width="34px"
                        height="34px"
                    >
                </div>
                <h3 class="chat-header__name">{{ companion.displayName }}</h3>
            </div>
        {{else}}
            <h3 class="chat-header__title">{{ activeChat.title }}</h2>
        {{/if}}

        {{{ OptionsIcon onClick=handleChatOptionsToggle }}}
    </header>


    <div class="chat-main">
        {{!-- <time class="chat-main__date" datetime="{{ this.time }}">{{ this.time }}</time>  --}}
        <div class="chat-main__messages">
            {{#each activeChat.messages}}
                <div class="chat-main__message {{#if isMine}} chat-main__message_mine {{/if}}">
                    <p>{{ this.content }}</p>
                    <div class="chat-main__message-details">
                        {{> TicksIcon }}
                        <time datetime="{{ this.time }}">{{ this.time }}</time>
                    </div>
                </div>
            {{/each}}
            {{!-- <div class="chat-main__photo">
                <img src="http://localhost:3000/videocamera.png" alt="Videocamera image">
                <time datetime="9:20">9:20</time>
            </div>
            <div class="chat-main__message_mine">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore ipsum officiis rerum atque repudiandae esse autem et excepturi inventore labore?</p>
                <div class="chat-main__message-details">
                    {{> TicksIcon }}
                    <time datetime="13:40">13:40</time>
                </div>
            </div>
            <div class="chat-main__message_mine">
                <p>404 not found page</p>
                <div class="chat-main__message-details">
                    {{> TicksIcon }}
                    <time datetime="13:45">13:45</time>
                </div>
            </div>
            <div class="chat-main__message_mine">
                <p>500 interval server error page</p>
                <div class="chat-main__message-details">
                    {{> TicksIcon }}
                    <time datetime="13:45">13:45</time>
                </div>
            </div> --}}
        </div>
    </div>


    <footer class="chat-footer">
        {{!-- <div class="chat-footer__options">
            <div class="chat-footer__options-item">
                {{> MediaIcon }}

                <label for="media">
                    <span>Photo or Video</span>
                    <input 
                        type="file" 
                        accept="image/*" 
                        hidden="true" 
                        id="media"
                    >
                </label>
            </div>
            <div class="chat-footer__options-item">
                {{> FileIcon }}

                <label for="media">
                    <span>File</span>
                    <input type="file" accept="image/*" hidden="true" id="media">
                </label>
            </div>
            <div class="chat-footer__options-item">
                {{> LocationIcon }}
            
                <label for="media">
                    <span>Location</span>
                    <input type="file" accept="image/*" hidden="true" id="media">
                </label>
            </div>
        </div> --}}

        <button class="chat__button" type="button">
            {{> PinIcon }}
        </button>

        {{{
            Field
                type="text"
                name="message"
                onBlur=onBlur
                ref="message"
                env="chat"
                placeholder="Message"
                validate=validate.message
        }}}

        {{{ 
            Button
                type="button"
                env='chat'
                onClick=handleSendClick
        }}}
    </footer>
</section>